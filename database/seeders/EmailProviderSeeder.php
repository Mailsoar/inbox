<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\EmailProvider;

class EmailProviderSeeder extends Seeder
{
    public function run()
    {
        $providers = [
            [
                'name' => 'gmail',
                'display_name' => 'Gmail',
                'description' => 'Google Gmail',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 10,
                'imap_host' => 'imap.gmail.com',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => true,
                'oauth_provider' => 'google',
                'domains' => ['gmail.com', 'googlemail.com'],
                'mx_patterns' => ['google.com', 'googlemail.com'],
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => 'Google Gmail - Principal fournisseur B2C',
                'logo_url' => null,
            ],
            [
                'name' => 'outlook',
                'display_name' => 'Outlook / Hotmail',
                'description' => 'Microsoft Outlook',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 20,
                'imap_host' => 'outlook.office365.com',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => true,
                'oauth_provider' => 'microsoft',
                'domains' => ['outlook.com', 'hotmail.com', 'live.com', 'msn.com'],
                'mx_patterns' => ['outlook.com', 'hotmail.com'],
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => 'Microsoft Outlook - Fournisseur B2C majeur',
                'logo_url' => null,
            ],
            [
                'name' => 'yahoo',
                'display_name' => 'Yahoo Mail',
                'description' => 'Yahoo Mail',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 30,
                'imap_host' => 'imap.mail.yahoo.com',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['yahoo.com', 'yahoo.fr', 'ymail.com', 'rocketmail.com'],
                'mx_patterns' => ['yahoo.com', 'yahoodns.net'],
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => 'Yahoo Mail - Fournisseur B2C',
                'logo_url' => null,
            ],
            [
                'name' => 'laposte',
                'display_name' => 'La Poste',
                'description' => 'Messagerie La Poste franÃ§aise',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.laposte.net',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['laposte.net'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'orange',
                'display_name' => 'Orange',
                'description' => 'Messagerie Orange France',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.orange.fr',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['orange.fr', 'wanadoo.fr'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'sfr',
                'display_name' => 'SFR',
                'description' => 'Messagerie SFR',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.sfr.fr',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['sfr.fr', 'neuf.fr', 'cegetel.net'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'free',
                'display_name' => 'Free',
                'description' => 'Messagerie Free',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.free.fr',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['free.fr'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'zoho',
                'display_name' => 'Zoho Mail',
                'description' => 'Zoho Mail service',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.zoho.com',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['zoho.com', 'zoho.eu'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'webde',
                'display_name' => 'Web.de',
                'description' => 'Web.de German email service',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.web.de',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['web.de'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'gmx',
                'display_name' => 'GMX',
                'description' => 'GMX email service',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.gmx.net',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['gmx.com', 'gmx.de', 'gmx.net'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'amazon_workmail',
                'display_name' => 'Amazon WorkMail',
                'description' => 'Amazon WorkMail service',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.mail.us-east-1.awsapps.com',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => [],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'apple_icloud',
                'display_name' => 'Apple iCloud',
                'description' => 'Apple iCloud Mail',
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.mail.me.com',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => ['icloud.com', 'me.com', 'mac.com'],
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'ionos',
                'display_name' => 'IONOS',
                'description' => 'IONOS email hosting',
                'provider_type' => 'b2b',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'imap.ionos.fr',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => null,
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'ovh',
                'display_name' => 'OVH',
                'description' => 'OVH email hosting',
                'provider_type' => 'b2b',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'ssl0.ovh.net',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => null,
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'gandi',
                'display_name' => 'Gandi',
                'description' => 'Gandi email hosting',
                'provider_type' => 'b2b',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 100,
                'imap_host' => 'mail.gandi.net',
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => null,
                'mx_patterns' => null,
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => null,
                'logo_url' => null,
            ],
            [
                'name' => 'icloud',
                'display_name' => 'iCloud Mail',
                'description' => null,
                'provider_type' => 'b2c',
                'is_valid' => true,
                'is_active' => true,
                'detection_priority' => 50,
                'imap_host' => null,
                'imap_port' => 993,
                'imap_encryption' => 'ssl',
                'validate_cert' => true,
                'supports_oauth' => false,
                'oauth_provider' => null,
                'domains' => null,
                'mx_patterns' => ['icloud.com', 'me.com'],
                'requires_app_password' => false,
                'instructions' => null,
                'notes' => 'Apple iCloud Mail',
                'logo_url' => null,
            ],
        ];

        foreach ($providers as $provider) {
            EmailProvider::updateOrCreate(
                ['name' => $provider['name']],
                $provider
            );
        }
    }
}